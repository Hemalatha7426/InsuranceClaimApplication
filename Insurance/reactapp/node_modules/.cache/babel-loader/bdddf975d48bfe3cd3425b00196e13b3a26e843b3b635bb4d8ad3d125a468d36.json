{"ast":null,"code":"// import React, { useEffect, useState } from \"react\";\n// import \"./ClaimList.css\";\n// import {\n//   getAllClaims,\n//   getAllCustomers,\n//   getMyClaims,\n//   updateClaimStatus,\n// } from \"../utils/api\";\n\n// export default function ClaimList({ forAgent = false, onView }) {\n//   const [claims, setClaims] = useState([]);\n//   const [customers, setCustomers] = useState([]);\n//   const [filter, setFilter] = useState(\"ALL\");\n//   const [sortField, setSortField] = useState(\"\");\n//   const [sortOrder, setSortOrder] = useState(\"asc\");\n//   const [editingClaimId, setEditingClaimId] = useState(null);\n//   const [editStatus, setEditStatus] = useState(\"\");\n//   const [page, setPage] = useState(1);\n//   const [loading, setLoading] = useState(true);\n//   const pageSize = 5;\n\n//   // -------- Fetch claims and customers based on role --------\n//   useEffect(() => {\n//     const fetchClaims = async () => {\n//       setLoading(true);\n//       try {\n//         const auth = JSON.parse(localStorage.getItem(\"auth\") || \"{}\");\n//         let claimData = [];\n\n//         if (auth.role === \"ADMIN\" || auth.role === \"AGENT\") {\n//           claimData = await getAllClaims();\n//           const customerData = await getAllCustomers();\n//           setCustomers(customerData);\n//         } else if (auth.role === \"CUSTOMER\" && auth.customerId) {\n//           claimData = await getMyClaims(auth.customerId);\n//         }\n\n//         setClaims(claimData || []);\n//       } catch (err) {\n//         console.error(\"Failed to fetch claims:\", err);\n//         setClaims([]);\n//       } finally {\n//         setLoading(false);\n//       }\n//     };\n\n//     fetchClaims();\n//   }, [forAgent]);\n\n//   // -------- Sorting --------\n//   const handleSort = (field) => {\n//     const order = sortField === field && sortOrder === \"asc\" ? \"desc\" : \"asc\";\n//     setSortField(field);\n//     setSortOrder(order);\n//   };\n\n//   const sortedClaims = [...claims]\n//     .filter((c) => (filter === \"ALL\" ? true : c.status === filter))\n//     .sort((a, b) => {\n//       if (!sortField) return 0;\n//       const valA = a[sortField];\n//       const valB = b[sortField];\n//       if (valA < valB) return sortOrder === \"asc\" ? -1 : 1;\n//       if (valA > valB) return sortOrder === \"asc\" ? 1 : -1;\n//       return 0;\n//     });\n\n//   // -------- Pagination --------\n//   const paginatedClaims = sortedClaims.slice(\n//     (page - 1) * pageSize,\n//     page * pageSize\n//   );\n\n//   // -------- Save claim status --------\n//   const saveStatusUpdate = async (claimId) => {\n//     try {\n//       await updateClaimStatus(claimId, editStatus);\n//       setClaims((prev) =>\n//         prev.map((c) => (c.id === claimId ? { ...c, status: editStatus } : c))\n//       );\n//       setEditingClaimId(null);\n//     } catch (err) {\n//       console.error(\"Failed to update claim status:\", err);\n//     }\n//   };\n\n//   // -------- Helper to get customer name --------\n//   const getCustomerName = (claim) => {\n//     return (\n//       claim.customer?.name ||\n//       customers.find((c) => c.id === claim.customerId)?.name ||\n//       \"Unknown\"\n//     );\n//   };\n\n//   if (loading) return <p>Loading claims...</p>;\n\n//   return (\n//     <div className=\"claim-list\">\n//       <h2>{forAgent ? \"Manage Claims\" : \"My Claims\"}</h2>\n\n//       {/* Filter */}\n//       <div className=\"filter-bar\">\n//         <label>Status:</label>\n//         <select\n//           value={filter}\n//           onChange={(e) => {\n//             setFilter(e.target.value);\n//             setPage(1);\n//           }}\n//         >\n//           <option value=\"ALL\">All</option>\n//           <option value=\"SUBMITTED\">Submitted</option>\n//           <option value=\"UNDER_REVIEW\">Under Review</option>\n//           <option value=\"APPROVED\">Approved</option>\n//           <option value=\"REJECTED\">Rejected</option>\n//         </select>\n//       </div>\n\n//       {/* Table */}\n//       <table className=\"table\">\n//         <thead>\n//           <tr>\n//             <th onClick={() => handleSort(\"id\")}>\n//               ID {sortField === \"id\" ? (sortOrder === \"asc\" ? \"↑\" : \"↓\") : \"\"}\n//             </th>\n//             {forAgent && <th>Customer</th>}\n//             <th onClick={() => handleSort(\"claimType\")}>\n//               Type{\" \"}\n//               {sortField === \"claimType\" ? (sortOrder === \"asc\" ? \"↑\" : \"↓\") : \"\"}\n//             </th>\n//             <th onClick={() => handleSort(\"claimAmount\")}>\n//               Amount{\" \"}\n//               {sortField === \"claimAmount\" ? (sortOrder === \"asc\" ? \"↑\" : \"↓\") : \"\"}\n//             </th>\n//             <th onClick={() => handleSort(\"status\")}>\n//               Status{\" \"}\n//               {sortField === \"status\" ? (sortOrder === \"asc\" ? \"↑\" : \"↓\") : \"\"}\n//             </th>\n//             <th onClick={() => handleSort(\"submissionDate\")}>\n//               Submitted{\" \"}\n//               {sortField === \"submissionDate\"\n//                 ? sortOrder === \"asc\"\n//                   ? \"↑\"\n//                   : \"↓\"\n//                 : \"\"}\n//             </th>\n//             <th>File</th>\n//             <th>Action</th>\n//           </tr>\n//         </thead>\n//         <tbody>\n//           {paginatedClaims.length === 0 ? (\n//             <tr>\n//               <td colSpan={forAgent ? 8 : 7}>No claims found.</td>\n//             </tr>\n//           ) : (\n//             paginatedClaims.map((c) => (\n//               <tr key={c.id}>\n//                 <td>{c.id}</td>\n//                 {forAgent && <td>{getCustomerName(c)}</td>}\n//                 <td>{c.claimType}</td>\n//                 <td>{c.claimAmount?.toFixed(2)}</td>\n//                 <td>\n//                   {editingClaimId === c.id ? (\n//                     <select\n//                       value={editStatus}\n//                       onChange={(e) => setEditStatus(e.target.value)}\n//                     >\n//                       <option value=\"SUBMITTED\">SUBMITTED</option>\n//                       <option value=\"UNDER_REVIEW\">UNDER_REVIEW</option>\n//                       <option value=\"APPROVED\">APPROVED</option>\n//                       <option value=\"REJECTED\">REJECTED</option>\n//                     </select>\n//                   ) : (\n//                     c.status\n//                   )}\n//                 </td>\n//                 <td>{c.submissionDate}</td>\n//                 <td>\n//                   {c.fileUrl ? (\n//                     <a href={c.fileUrl} target=\"_blank\" rel=\"noopener noreferrer\">\n//                       View File\n//                     </a>\n//                   ) : (\n//                     <span className=\"text-muted\">No file</span>\n//                   )}\n//                 </td>\n//                 <td>\n//                   {forAgent ? (\n//                     editingClaimId === c.id ? (\n//                       <>\n//                         <button\n//                           className=\"btn-small\"\n//                           onClick={() => saveStatusUpdate(c.id)}\n//                         >\n//                           Save\n//                         </button>\n//                         <button\n//                           className=\"btn-small\"\n//                           onClick={() => setEditingClaimId(null)}\n//                         >\n//                           Cancel\n//                         </button>\n//                       </>\n//                     ) : (\n//                       <button\n//                         className=\"btn-small\"\n//                         onClick={() => {\n//                           setEditingClaimId(c.id);\n//                           setEditStatus(c.status);\n//                         }}\n//                       >\n//                         Edit\n//                       </button>\n//                     )\n//                   ) : (\n//                     <button\n//                       className=\"btn-small\"\n//                       onClick={() => onView(\"details\", c.id)}\n//                     >\n//                       Details\n//                     </button>\n//                   )}\n//                 </td>\n//               </tr>\n//             ))\n//           )}\n//         </tbody>\n//       </table>\n\n//       {/* Pagination */}\n//       <div className=\"pagination\">\n//         <button onClick={() => setPage((p) => Math.max(1, p - 1))} disabled={page === 1}>Prev</button>\n//         <span>Page {page} of {Math.ceil(sortedClaims.length / pageSize)}</span>\n//         <button\n//           onClick={() => setPage((p) => (p * pageSize < sortedClaims.length ? p + 1 : p))}\n//           disabled={page * pageSize >= sortedClaims.length}\n//         >\n//           Next\n//         </button>\n//       </div>\n//     </div>\n//   );\n// }\n// import React, { useEffect, useState } from \"react\";\n// import \"./ClaimList.css\";\n// import {\n//   getAllClaims,\n//   getAllCustomers,\n//   getMyClaims,\n//   updateClaimStatus,\n// } from \"../utils/api\";\n\n// export default function ClaimList({ onView }) {\n//   const [claims, setClaims] = useState([]);\n//   const [customers, setCustomers] = useState([]);\n//   const [filter, setFilter] = useState(\"ALL\");\n//   const [sortField, setSortField] = useState(\"\");\n//   const [sortOrder, setSortOrder] = useState(\"asc\");\n//   const [editingClaimId, setEditingClaimId] = useState(null);\n//   const [editStatus, setEditStatus] = useState(\"\");\n//   const [page, setPage] = useState(1);\n//   const [loading, setLoading] = useState(true);\n//   const [isAgent, setIsAgent] = useState(false); // Dynamically track agent/admin\n//   const pageSize = 5;\n\n//   // -------- Fetch claims and customers based on role --------\n//   useEffect(() => {\n//     const fetchClaims = async () => {\n//       setLoading(true);\n//       try {\n//         const auth = JSON.parse(localStorage.getItem(\"auth\") || \"{}\");\n//         setIsAgent(auth.role === \"ADMIN\" || auth.role === \"AGENT\");\n\n//         let claimData = [];\n\n//         if (auth.role === \"ADMIN\" || auth.role === \"AGENT\") {\n//           claimData = await getAllClaims();\n//           const customerData = await getAllCustomers();\n//           setCustomers(customerData);\n//         } else if (auth.role === \"CUSTOMER\" && auth.customerId) {\n//           claimData = await getMyClaims(auth.customerId);\n//         }\n\n//         setClaims(claimData || []);\n//       } catch (err) {\n//         console.error(\"Failed to fetch claims:\", err);\n//         setClaims([]);\n//       } finally {\n//         setLoading(false);\n//       }\n//     };\n\n//     fetchClaims();\n//   }, []);\n\n//   // -------- Sorting --------\n//   const handleSort = (field) => {\n//     const order = sortField === field && sortOrder === \"asc\" ? \"desc\" : \"asc\";\n//     setSortField(field);\n//     setSortOrder(order);\n//   };\n\n//   const sortedClaims = [...claims]\n//     .filter((c) => (filter === \"ALL\" ? true : c.status === filter))\n//     .sort((a, b) => {\n//       if (!sortField) return 0;\n//       const valA = a[sortField];\n//       const valB = b[sortField];\n//       if (valA < valB) return sortOrder === \"asc\" ? -1 : 1;\n//       if (valA > valB) return sortOrder === \"asc\" ? 1 : -1;\n//       return 0;\n//     });\n\n//   // -------- Pagination --------\n//   const paginatedClaims = sortedClaims.slice(\n//     (page - 1) * pageSize,\n//     page * pageSize\n//   );\n\n//   // -------- Save claim status --------\n//   const saveStatusUpdate = async (claimId) => {\n//     try {\n//       await updateClaimStatus(claimId, editStatus);\n//       setClaims((prev) =>\n//         prev.map((c) => (c.id === claimId ? { ...c, status: editStatus } : c))\n//       );\n//       setEditingClaimId(null);\n//     } catch (err) {\n//       console.error(\"Failed to update claim status:\", err);\n//     }\n//   };\n\n//   // -------- Helper to get customer name --------\n//   const getCustomerName = (claim) => {\n//     return (\n//       claim.customer?.name ||\n//       customers.find((c) => c.id === claim.customerId)?.name ||\n//       \"Unknown\"\n//     );\n//   };\n\n//   if (loading) return <p>Loading claims...</p>;\n\n//   return (\n//     <div className=\"claim-list\">\n//       <h2>{isAgent ? \"Manage Claims\" : \"My Claims\"}</h2>\n\n//       {/* Filter */}\n//       <div className=\"filter-bar\">\n//         <label>Status:</label>\n//         <select\n//           value={filter}\n//           onChange={(e) => {\n//             setFilter(e.target.value);\n//             setPage(1);\n//           }}\n//         >\n//           <option value=\"ALL\">All</option>\n//           <option value=\"SUBMITTED\">Submitted</option>\n//           <option value=\"UNDER_REVIEW\">Under Review</option>\n//           <option value=\"APPROVED\">Approved</option>\n//           <option value=\"REJECTED\">Rejected</option>\n//         </select>\n//       </div>\n\n//       {/* Table */}\n//       <table className=\"table\">\n//         <thead>\n//           <tr>\n//             <th onClick={() => handleSort(\"id\")}>\n//               ID {sortField === \"id\" ? (sortOrder === \"asc\" ? \"↑\" : \"↓\") : \"\"}\n//             </th>\n//             {isAgent && <th>Customer</th>}\n//             <th onClick={() => handleSort(\"claimType\")}>\n//               Type {sortField === \"claimType\" ? (sortOrder === \"asc\" ? \"↑\" : \"↓\") : \"\"}\n//             </th>\n//             <th onClick={() => handleSort(\"claimAmount\")}>\n//               Amount {sortField === \"claimAmount\" ? (sortOrder === \"asc\" ? \"↑\" : \"↓\") : \"\"}\n//             </th>\n//             <th onClick={() => handleSort(\"status\")}>\n//               Status {sortField === \"status\" ? (sortOrder === \"asc\" ? \"↑\" : \"↓\") : \"\"}\n//             </th>\n//             <th onClick={() => handleSort(\"submissionDate\")}>\n//               Submitted {sortField === \"submissionDate\" ? (sortOrder === \"asc\" ? \"↑\" : \"↓\") : \"\"}\n//             </th>\n//             <th>File</th>\n//             <th>Action</th>\n//           </tr>\n//         </thead>\n//         <tbody>\n//           {paginatedClaims.length === 0 ? (\n//             <tr>\n//               <td colSpan={isAgent ? 8 : 7}>No claims found.</td>\n//             </tr>\n//           ) : (\n//             paginatedClaims.map((c) => (\n//               <tr key={c.id}>\n//                 <td>{c.id}</td>\n//                 {isAgent && <td>{getCustomerName(c)}</td>}\n//                 <td>{c.claimType}</td>\n//                 <td>{c.claimAmount?.toFixed(2)}</td>\n//                 <td>\n//                   {editingClaimId === c.id ? (\n//                     <select\n//                       value={editStatus}\n//                       onChange={(e) => setEditStatus(e.target.value)}\n//                     >\n//                       <option value=\"SUBMITTED\">SUBMITTED</option>\n//                       <option value=\"UNDER_REVIEW\">UNDER_REVIEW</option>\n//                       <option value=\"APPROVED\">APPROVED</option>\n//                       <option value=\"REJECTED\">REJECTED</option>\n//                     </select>\n//                   ) : (\n//                     c.status\n//                   )}\n//                 </td>\n//                 <td>{c.submissionDate}</td>\n//                 <td>\n//                   {c.fileUrl ? (\n//                     <a href={c.fileUrl} target=\"_blank\" rel=\"noopener noreferrer\">\n//                       View File\n//                     </a>\n//                   ) : (\n//                     <span className=\"text-muted\">No file</span>\n//                   )}\n//                 </td>\n//                 <td>\n//                   {isAgent ? (\n//                     editingClaimId === c.id ? (\n//                       <>\n//                         <button className=\"btn-small\" onClick={() => saveStatusUpdate(c.id)}>\n//                           Save\n//                         </button>\n//                         <button className=\"btn-small\" onClick={() => setEditingClaimId(null)}>\n//                           Cancel\n//                         </button>\n//                       </>\n//                     ) : (\n//                       <button\n//                         className=\"btn-small\"\n//                         onClick={() => {\n//                           setEditingClaimId(c.id);\n//                           setEditStatus(c.status);\n//                         }}\n//                       >\n//                         Edit\n//                       </button>\n//                     )\n//                   ) : (\n//                     <button className=\"btn-small\" onClick={() => onView(\"details\", c.id)}>\n//                       Details\n//                     </button>\n//                   )}\n//                 </td>\n//               </tr>\n//             ))\n//           )}\n//         </tbody>\n//       </table>\n\n//       {/* Pagination */}\n//       <div className=\"pagination\">\n//         <button onClick={() => setPage((p) => Math.max(1, p - 1))} disabled={page === 1}>\n//           Prev\n//         </button>\n//         <span>\n//           Page {page} of {Math.ceil(sortedClaims.length / pageSize)}\n//         </span>\n//         <button\n//           onClick={() => setPage((p) => (p * pageSize < sortedClaims.length ? p + 1 : p))}\n//           disabled={page * pageSize >= sortedClaims.length}\n//         >\n//           Next\n//         </button>\n//       </div>\n//     </div>\n//   );\n// }","map":{"version":3,"names":[],"sources":["C:/Users/hemal/Downloads/Insurance Claim FullStack Application/Insurance/reactapp/src/components/ClaimList.js"],"sourcesContent":["// import React, { useEffect, useState } from \"react\";\n// import \"./ClaimList.css\";\n// import {\n//   getAllClaims,\n//   getAllCustomers,\n//   getMyClaims,\n//   updateClaimStatus,\n// } from \"../utils/api\";\n\n// export default function ClaimList({ forAgent = false, onView }) {\n//   const [claims, setClaims] = useState([]);\n//   const [customers, setCustomers] = useState([]);\n//   const [filter, setFilter] = useState(\"ALL\");\n//   const [sortField, setSortField] = useState(\"\");\n//   const [sortOrder, setSortOrder] = useState(\"asc\");\n//   const [editingClaimId, setEditingClaimId] = useState(null);\n//   const [editStatus, setEditStatus] = useState(\"\");\n//   const [page, setPage] = useState(1);\n//   const [loading, setLoading] = useState(true);\n//   const pageSize = 5;\n\n//   // -------- Fetch claims and customers based on role --------\n//   useEffect(() => {\n//     const fetchClaims = async () => {\n//       setLoading(true);\n//       try {\n//         const auth = JSON.parse(localStorage.getItem(\"auth\") || \"{}\");\n//         let claimData = [];\n\n//         if (auth.role === \"ADMIN\" || auth.role === \"AGENT\") {\n//           claimData = await getAllClaims();\n//           const customerData = await getAllCustomers();\n//           setCustomers(customerData);\n//         } else if (auth.role === \"CUSTOMER\" && auth.customerId) {\n//           claimData = await getMyClaims(auth.customerId);\n//         }\n\n//         setClaims(claimData || []);\n//       } catch (err) {\n//         console.error(\"Failed to fetch claims:\", err);\n//         setClaims([]);\n//       } finally {\n//         setLoading(false);\n//       }\n//     };\n\n//     fetchClaims();\n//   }, [forAgent]);\n\n//   // -------- Sorting --------\n//   const handleSort = (field) => {\n//     const order = sortField === field && sortOrder === \"asc\" ? \"desc\" : \"asc\";\n//     setSortField(field);\n//     setSortOrder(order);\n//   };\n\n//   const sortedClaims = [...claims]\n//     .filter((c) => (filter === \"ALL\" ? true : c.status === filter))\n//     .sort((a, b) => {\n//       if (!sortField) return 0;\n//       const valA = a[sortField];\n//       const valB = b[sortField];\n//       if (valA < valB) return sortOrder === \"asc\" ? -1 : 1;\n//       if (valA > valB) return sortOrder === \"asc\" ? 1 : -1;\n//       return 0;\n//     });\n\n//   // -------- Pagination --------\n//   const paginatedClaims = sortedClaims.slice(\n//     (page - 1) * pageSize,\n//     page * pageSize\n//   );\n\n//   // -------- Save claim status --------\n//   const saveStatusUpdate = async (claimId) => {\n//     try {\n//       await updateClaimStatus(claimId, editStatus);\n//       setClaims((prev) =>\n//         prev.map((c) => (c.id === claimId ? { ...c, status: editStatus } : c))\n//       );\n//       setEditingClaimId(null);\n//     } catch (err) {\n//       console.error(\"Failed to update claim status:\", err);\n//     }\n//   };\n\n//   // -------- Helper to get customer name --------\n//   const getCustomerName = (claim) => {\n//     return (\n//       claim.customer?.name ||\n//       customers.find((c) => c.id === claim.customerId)?.name ||\n//       \"Unknown\"\n//     );\n//   };\n\n//   if (loading) return <p>Loading claims...</p>;\n\n//   return (\n//     <div className=\"claim-list\">\n//       <h2>{forAgent ? \"Manage Claims\" : \"My Claims\"}</h2>\n\n//       {/* Filter */}\n//       <div className=\"filter-bar\">\n//         <label>Status:</label>\n//         <select\n//           value={filter}\n//           onChange={(e) => {\n//             setFilter(e.target.value);\n//             setPage(1);\n//           }}\n//         >\n//           <option value=\"ALL\">All</option>\n//           <option value=\"SUBMITTED\">Submitted</option>\n//           <option value=\"UNDER_REVIEW\">Under Review</option>\n//           <option value=\"APPROVED\">Approved</option>\n//           <option value=\"REJECTED\">Rejected</option>\n//         </select>\n//       </div>\n\n//       {/* Table */}\n//       <table className=\"table\">\n//         <thead>\n//           <tr>\n//             <th onClick={() => handleSort(\"id\")}>\n//               ID {sortField === \"id\" ? (sortOrder === \"asc\" ? \"↑\" : \"↓\") : \"\"}\n//             </th>\n//             {forAgent && <th>Customer</th>}\n//             <th onClick={() => handleSort(\"claimType\")}>\n//               Type{\" \"}\n//               {sortField === \"claimType\" ? (sortOrder === \"asc\" ? \"↑\" : \"↓\") : \"\"}\n//             </th>\n//             <th onClick={() => handleSort(\"claimAmount\")}>\n//               Amount{\" \"}\n//               {sortField === \"claimAmount\" ? (sortOrder === \"asc\" ? \"↑\" : \"↓\") : \"\"}\n//             </th>\n//             <th onClick={() => handleSort(\"status\")}>\n//               Status{\" \"}\n//               {sortField === \"status\" ? (sortOrder === \"asc\" ? \"↑\" : \"↓\") : \"\"}\n//             </th>\n//             <th onClick={() => handleSort(\"submissionDate\")}>\n//               Submitted{\" \"}\n//               {sortField === \"submissionDate\"\n//                 ? sortOrder === \"asc\"\n//                   ? \"↑\"\n//                   : \"↓\"\n//                 : \"\"}\n//             </th>\n//             <th>File</th>\n//             <th>Action</th>\n//           </tr>\n//         </thead>\n//         <tbody>\n//           {paginatedClaims.length === 0 ? (\n//             <tr>\n//               <td colSpan={forAgent ? 8 : 7}>No claims found.</td>\n//             </tr>\n//           ) : (\n//             paginatedClaims.map((c) => (\n//               <tr key={c.id}>\n//                 <td>{c.id}</td>\n//                 {forAgent && <td>{getCustomerName(c)}</td>}\n//                 <td>{c.claimType}</td>\n//                 <td>{c.claimAmount?.toFixed(2)}</td>\n//                 <td>\n//                   {editingClaimId === c.id ? (\n//                     <select\n//                       value={editStatus}\n//                       onChange={(e) => setEditStatus(e.target.value)}\n//                     >\n//                       <option value=\"SUBMITTED\">SUBMITTED</option>\n//                       <option value=\"UNDER_REVIEW\">UNDER_REVIEW</option>\n//                       <option value=\"APPROVED\">APPROVED</option>\n//                       <option value=\"REJECTED\">REJECTED</option>\n//                     </select>\n//                   ) : (\n//                     c.status\n//                   )}\n//                 </td>\n//                 <td>{c.submissionDate}</td>\n//                 <td>\n//                   {c.fileUrl ? (\n//                     <a href={c.fileUrl} target=\"_blank\" rel=\"noopener noreferrer\">\n//                       View File\n//                     </a>\n//                   ) : (\n//                     <span className=\"text-muted\">No file</span>\n//                   )}\n//                 </td>\n//                 <td>\n//                   {forAgent ? (\n//                     editingClaimId === c.id ? (\n//                       <>\n//                         <button\n//                           className=\"btn-small\"\n//                           onClick={() => saveStatusUpdate(c.id)}\n//                         >\n//                           Save\n//                         </button>\n//                         <button\n//                           className=\"btn-small\"\n//                           onClick={() => setEditingClaimId(null)}\n//                         >\n//                           Cancel\n//                         </button>\n//                       </>\n//                     ) : (\n//                       <button\n//                         className=\"btn-small\"\n//                         onClick={() => {\n//                           setEditingClaimId(c.id);\n//                           setEditStatus(c.status);\n//                         }}\n//                       >\n//                         Edit\n//                       </button>\n//                     )\n//                   ) : (\n//                     <button\n//                       className=\"btn-small\"\n//                       onClick={() => onView(\"details\", c.id)}\n//                     >\n//                       Details\n//                     </button>\n//                   )}\n//                 </td>\n//               </tr>\n//             ))\n//           )}\n//         </tbody>\n//       </table>\n\n//       {/* Pagination */}\n//       <div className=\"pagination\">\n//         <button onClick={() => setPage((p) => Math.max(1, p - 1))} disabled={page === 1}>Prev</button>\n//         <span>Page {page} of {Math.ceil(sortedClaims.length / pageSize)}</span>\n//         <button\n//           onClick={() => setPage((p) => (p * pageSize < sortedClaims.length ? p + 1 : p))}\n//           disabled={page * pageSize >= sortedClaims.length}\n//         >\n//           Next\n//         </button>\n//       </div>\n//     </div>\n//   );\n// }\n// import React, { useEffect, useState } from \"react\";\n// import \"./ClaimList.css\";\n// import {\n//   getAllClaims,\n//   getAllCustomers,\n//   getMyClaims,\n//   updateClaimStatus,\n// } from \"../utils/api\";\n\n// export default function ClaimList({ onView }) {\n//   const [claims, setClaims] = useState([]);\n//   const [customers, setCustomers] = useState([]);\n//   const [filter, setFilter] = useState(\"ALL\");\n//   const [sortField, setSortField] = useState(\"\");\n//   const [sortOrder, setSortOrder] = useState(\"asc\");\n//   const [editingClaimId, setEditingClaimId] = useState(null);\n//   const [editStatus, setEditStatus] = useState(\"\");\n//   const [page, setPage] = useState(1);\n//   const [loading, setLoading] = useState(true);\n//   const [isAgent, setIsAgent] = useState(false); // Dynamically track agent/admin\n//   const pageSize = 5;\n\n//   // -------- Fetch claims and customers based on role --------\n//   useEffect(() => {\n//     const fetchClaims = async () => {\n//       setLoading(true);\n//       try {\n//         const auth = JSON.parse(localStorage.getItem(\"auth\") || \"{}\");\n//         setIsAgent(auth.role === \"ADMIN\" || auth.role === \"AGENT\");\n\n//         let claimData = [];\n\n//         if (auth.role === \"ADMIN\" || auth.role === \"AGENT\") {\n//           claimData = await getAllClaims();\n//           const customerData = await getAllCustomers();\n//           setCustomers(customerData);\n//         } else if (auth.role === \"CUSTOMER\" && auth.customerId) {\n//           claimData = await getMyClaims(auth.customerId);\n//         }\n\n//         setClaims(claimData || []);\n//       } catch (err) {\n//         console.error(\"Failed to fetch claims:\", err);\n//         setClaims([]);\n//       } finally {\n//         setLoading(false);\n//       }\n//     };\n\n//     fetchClaims();\n//   }, []);\n\n//   // -------- Sorting --------\n//   const handleSort = (field) => {\n//     const order = sortField === field && sortOrder === \"asc\" ? \"desc\" : \"asc\";\n//     setSortField(field);\n//     setSortOrder(order);\n//   };\n\n//   const sortedClaims = [...claims]\n//     .filter((c) => (filter === \"ALL\" ? true : c.status === filter))\n//     .sort((a, b) => {\n//       if (!sortField) return 0;\n//       const valA = a[sortField];\n//       const valB = b[sortField];\n//       if (valA < valB) return sortOrder === \"asc\" ? -1 : 1;\n//       if (valA > valB) return sortOrder === \"asc\" ? 1 : -1;\n//       return 0;\n//     });\n\n//   // -------- Pagination --------\n//   const paginatedClaims = sortedClaims.slice(\n//     (page - 1) * pageSize,\n//     page * pageSize\n//   );\n\n//   // -------- Save claim status --------\n//   const saveStatusUpdate = async (claimId) => {\n//     try {\n//       await updateClaimStatus(claimId, editStatus);\n//       setClaims((prev) =>\n//         prev.map((c) => (c.id === claimId ? { ...c, status: editStatus } : c))\n//       );\n//       setEditingClaimId(null);\n//     } catch (err) {\n//       console.error(\"Failed to update claim status:\", err);\n//     }\n//   };\n\n//   // -------- Helper to get customer name --------\n//   const getCustomerName = (claim) => {\n//     return (\n//       claim.customer?.name ||\n//       customers.find((c) => c.id === claim.customerId)?.name ||\n//       \"Unknown\"\n//     );\n//   };\n\n//   if (loading) return <p>Loading claims...</p>;\n\n//   return (\n//     <div className=\"claim-list\">\n//       <h2>{isAgent ? \"Manage Claims\" : \"My Claims\"}</h2>\n\n//       {/* Filter */}\n//       <div className=\"filter-bar\">\n//         <label>Status:</label>\n//         <select\n//           value={filter}\n//           onChange={(e) => {\n//             setFilter(e.target.value);\n//             setPage(1);\n//           }}\n//         >\n//           <option value=\"ALL\">All</option>\n//           <option value=\"SUBMITTED\">Submitted</option>\n//           <option value=\"UNDER_REVIEW\">Under Review</option>\n//           <option value=\"APPROVED\">Approved</option>\n//           <option value=\"REJECTED\">Rejected</option>\n//         </select>\n//       </div>\n\n//       {/* Table */}\n//       <table className=\"table\">\n//         <thead>\n//           <tr>\n//             <th onClick={() => handleSort(\"id\")}>\n//               ID {sortField === \"id\" ? (sortOrder === \"asc\" ? \"↑\" : \"↓\") : \"\"}\n//             </th>\n//             {isAgent && <th>Customer</th>}\n//             <th onClick={() => handleSort(\"claimType\")}>\n//               Type {sortField === \"claimType\" ? (sortOrder === \"asc\" ? \"↑\" : \"↓\") : \"\"}\n//             </th>\n//             <th onClick={() => handleSort(\"claimAmount\")}>\n//               Amount {sortField === \"claimAmount\" ? (sortOrder === \"asc\" ? \"↑\" : \"↓\") : \"\"}\n//             </th>\n//             <th onClick={() => handleSort(\"status\")}>\n//               Status {sortField === \"status\" ? (sortOrder === \"asc\" ? \"↑\" : \"↓\") : \"\"}\n//             </th>\n//             <th onClick={() => handleSort(\"submissionDate\")}>\n//               Submitted {sortField === \"submissionDate\" ? (sortOrder === \"asc\" ? \"↑\" : \"↓\") : \"\"}\n//             </th>\n//             <th>File</th>\n//             <th>Action</th>\n//           </tr>\n//         </thead>\n//         <tbody>\n//           {paginatedClaims.length === 0 ? (\n//             <tr>\n//               <td colSpan={isAgent ? 8 : 7}>No claims found.</td>\n//             </tr>\n//           ) : (\n//             paginatedClaims.map((c) => (\n//               <tr key={c.id}>\n//                 <td>{c.id}</td>\n//                 {isAgent && <td>{getCustomerName(c)}</td>}\n//                 <td>{c.claimType}</td>\n//                 <td>{c.claimAmount?.toFixed(2)}</td>\n//                 <td>\n//                   {editingClaimId === c.id ? (\n//                     <select\n//                       value={editStatus}\n//                       onChange={(e) => setEditStatus(e.target.value)}\n//                     >\n//                       <option value=\"SUBMITTED\">SUBMITTED</option>\n//                       <option value=\"UNDER_REVIEW\">UNDER_REVIEW</option>\n//                       <option value=\"APPROVED\">APPROVED</option>\n//                       <option value=\"REJECTED\">REJECTED</option>\n//                     </select>\n//                   ) : (\n//                     c.status\n//                   )}\n//                 </td>\n//                 <td>{c.submissionDate}</td>\n//                 <td>\n//                   {c.fileUrl ? (\n//                     <a href={c.fileUrl} target=\"_blank\" rel=\"noopener noreferrer\">\n//                       View File\n//                     </a>\n//                   ) : (\n//                     <span className=\"text-muted\">No file</span>\n//                   )}\n//                 </td>\n//                 <td>\n//                   {isAgent ? (\n//                     editingClaimId === c.id ? (\n//                       <>\n//                         <button className=\"btn-small\" onClick={() => saveStatusUpdate(c.id)}>\n//                           Save\n//                         </button>\n//                         <button className=\"btn-small\" onClick={() => setEditingClaimId(null)}>\n//                           Cancel\n//                         </button>\n//                       </>\n//                     ) : (\n//                       <button\n//                         className=\"btn-small\"\n//                         onClick={() => {\n//                           setEditingClaimId(c.id);\n//                           setEditStatus(c.status);\n//                         }}\n//                       >\n//                         Edit\n//                       </button>\n//                     )\n//                   ) : (\n//                     <button className=\"btn-small\" onClick={() => onView(\"details\", c.id)}>\n//                       Details\n//                     </button>\n//                   )}\n//                 </td>\n//               </tr>\n//             ))\n//           )}\n//         </tbody>\n//       </table>\n\n//       {/* Pagination */}\n//       <div className=\"pagination\">\n//         <button onClick={() => setPage((p) => Math.max(1, p - 1))} disabled={page === 1}>\n//           Prev\n//         </button>\n//         <span>\n//           Page {page} of {Math.ceil(sortedClaims.length / pageSize)}\n//         </span>\n//         <button\n//           onClick={() => setPage((p) => (p * pageSize < sortedClaims.length ? p + 1 : p))}\n//           disabled={page * pageSize >= sortedClaims.length}\n//         >\n//           Next\n//         </button>\n//       </div>\n//     </div>\n//   );\n// }\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}