{"ast":null,"code":"// src/utils/api.js\nconst BASE_URL = \"http://localhost:8080/api\";\n\n/* ================== AUTH ================== */\nexport async function login(email, password) {\n  const res = await fetch(`${BASE_URL}/auth/login`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      email,\n      password\n    })\n  });\n  if (!res.ok) {\n    const body = await res.json().catch(() => ({}));\n    throw new Error(body.message || body.error || \"Invalid login credentials\");\n  }\n  return res.json(); // { message, userId, email, role, customerId? }\n}\nexport function saveAuth(data) {\n  localStorage.setItem(\"auth\", JSON.stringify(data));\n}\nexport function getAuth() {\n  const auth = localStorage.getItem(\"auth\");\n  return auth ? JSON.parse(auth) : null;\n}\n\n/* ================== CLAIMS ================== */\n// Fetch claims for logged-in customer\nexport async function getMyClaims() {\n  const auth = getAuth();\n  if (!auth) throw new Error(\"Not logged in\");\n  if (auth.customerId) {\n    const res = await fetch(`${BASE_URL}/claims/customer/${auth.customerId}`);\n    if (!res.ok) throw new Error(\"Failed to fetch claims\");\n    return res.json();\n  } else {\n    throw new Error(\"Customer ID not found. Please log in again.\");\n  }\n}","map":{"version":3,"names":["BASE_URL","login","email","password","res","fetch","method","headers","body","JSON","stringify","ok","json","catch","Error","message","error","saveAuth","data","localStorage","setItem","getAuth","auth","getItem","parse","getMyClaims","customerId"],"sources":["C:/Users/hemal/Downloads/Insurance - Copy/Insurance/reactapp/src/utils/api.js"],"sourcesContent":["// src/utils/api.js\nconst BASE_URL = \"http://localhost:8080/api\";\n\n/* ================== AUTH ================== */\nexport async function login(email, password) {\n  const res = await fetch(`${BASE_URL}/auth/login`, {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify({ email, password }),\n  });\n\n  if (!res.ok) {\n    const body = await res.json().catch(() => ({}));\n    throw new Error(body.message || body.error || \"Invalid login credentials\");\n  }\n\n  return res.json(); // { message, userId, email, role, customerId? }\n}\n\nexport function saveAuth(data) {\n  localStorage.setItem(\"auth\", JSON.stringify(data));\n}\n\nexport function getAuth() {\n  const auth = localStorage.getItem(\"auth\");\n  return auth ? JSON.parse(auth) : null;\n}\n\n/* ================== CLAIMS ================== */\n// Fetch claims for logged-in customer\nexport async function getMyClaims() {\n  const auth = getAuth();\n  if (!auth) throw new Error(\"Not logged in\");\n\n  if (auth.customerId) {\n    const res = await fetch(`${BASE_URL}/claims/customer/${auth.customerId}`);\n    if (!res.ok) throw new Error(\"Failed to fetch claims\");\n    return res.json();\n  } else {\n    throw new Error(\"Customer ID not found. Please log in again.\");\n  }\n}\n"],"mappings":"AAAA;AACA,MAAMA,QAAQ,GAAG,2BAA2B;;AAE5C;AACA,OAAO,eAAeC,KAAKA,CAACC,KAAK,EAAEC,QAAQ,EAAE;EAC3C,MAAMC,GAAG,GAAG,MAAMC,KAAK,CAAC,GAAGL,QAAQ,aAAa,EAAE;IAChDM,MAAM,EAAE,MAAM;IACdC,OAAO,EAAE;MAAE,cAAc,EAAE;IAAmB,CAAC;IAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;MAAER,KAAK;MAAEC;IAAS,CAAC;EAC1C,CAAC,CAAC;EAEF,IAAI,CAACC,GAAG,CAACO,EAAE,EAAE;IACX,MAAMH,IAAI,GAAG,MAAMJ,GAAG,CAACQ,IAAI,CAAC,CAAC,CAACC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;IAC/C,MAAM,IAAIC,KAAK,CAACN,IAAI,CAACO,OAAO,IAAIP,IAAI,CAACQ,KAAK,IAAI,2BAA2B,CAAC;EAC5E;EAEA,OAAOZ,GAAG,CAACQ,IAAI,CAAC,CAAC,CAAC,CAAC;AACrB;AAEA,OAAO,SAASK,QAAQA,CAACC,IAAI,EAAE;EAC7BC,YAAY,CAACC,OAAO,CAAC,MAAM,EAAEX,IAAI,CAACC,SAAS,CAACQ,IAAI,CAAC,CAAC;AACpD;AAEA,OAAO,SAASG,OAAOA,CAAA,EAAG;EACxB,MAAMC,IAAI,GAAGH,YAAY,CAACI,OAAO,CAAC,MAAM,CAAC;EACzC,OAAOD,IAAI,GAAGb,IAAI,CAACe,KAAK,CAACF,IAAI,CAAC,GAAG,IAAI;AACvC;;AAEA;AACA;AACA,OAAO,eAAeG,WAAWA,CAAA,EAAG;EAClC,MAAMH,IAAI,GAAGD,OAAO,CAAC,CAAC;EACtB,IAAI,CAACC,IAAI,EAAE,MAAM,IAAIR,KAAK,CAAC,eAAe,CAAC;EAE3C,IAAIQ,IAAI,CAACI,UAAU,EAAE;IACnB,MAAMtB,GAAG,GAAG,MAAMC,KAAK,CAAC,GAAGL,QAAQ,oBAAoBsB,IAAI,CAACI,UAAU,EAAE,CAAC;IACzE,IAAI,CAACtB,GAAG,CAACO,EAAE,EAAE,MAAM,IAAIG,KAAK,CAAC,wBAAwB,CAAC;IACtD,OAAOV,GAAG,CAACQ,IAAI,CAAC,CAAC;EACnB,CAAC,MAAM;IACL,MAAM,IAAIE,KAAK,CAAC,6CAA6C,CAAC;EAChE;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}