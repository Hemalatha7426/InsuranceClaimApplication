{"ast":null,"code":"// const BASE_URL = \"http://localhost:8080/api\";\n\n// /* ================== AUTH ================== */\n// export async function login(email, password) {\n//   const res = await fetch(`${BASE_URL}/auth/login`, {\n//     method: \"POST\",\n//     headers: { \"Content-Type\": \"application/json\" },\n//     body: JSON.stringify({ email, password }),\n//   });\n\n//   if (!res.ok) {\n//     const body = await res.json().catch(() => ({}));\n//     throw new Error(body.message || body.error || \"Invalid login credentials\");\n//   }\n\n//   const data = await res.json();\n\n//   // Save auth to localStorage\n//   saveAuth({\n//     userId: data.userId,\n//     customerId: data.customerId || null,\n//     role: data.role,\n//     email: data.email,\n//   });\n\n//   return data;\n// }\n\n// export async function registerUser(username, email, password, role) {\n//   const res = await fetch(`${BASE_URL}/auth/register`, {\n//     method: \"POST\",\n//     headers: { \"Content-Type\": \"application/json\" },\n//     body: JSON.stringify({\n//       username,\n//       email,\n//       password,\n//       role: role ? role.toUpperCase() : \"CUSTOMER\",\n//     }),\n//   });\n\n//   const data = await res.json();\n//   if (!res.ok) throw new Error(data.message || \"Registration failed\");\n\n//   // Save auth to localStorage\n//   saveAuth({\n//     userId: data.userId,\n//     customerId: data.customerId || null,\n//     role: data.role,\n//     email: data.email,\n//   });\n\n//   return data;\n// }\n\n// /* ================== AUTH HELPERS ================== */\n// export function saveAuth(data) {\n//   localStorage.setItem(\"auth\", JSON.stringify(data));\n// }\n\n// export function getAuth() {\n//   const auth = localStorage.getItem(\"auth\");\n//   return auth ? JSON.parse(auth) : null;\n// }\n\n// export function clearAuth() {\n//   localStorage.removeItem(\"auth\");\n// }\n\n// /* ================== CLAIMS ================== */\n// export async function createClaim(payload) {\n//   const res = await fetch(`${BASE_URL}/claims`, {\n//     method: \"POST\",\n//     headers: { \"Content-Type\": \"application/json\" },\n//     body: JSON.stringify(payload),\n//   });\n//   if (!res.ok) throw new Error(\"Failed to submit claim\");\n//   return res.json();\n// }\n\n// export async function getAllClaims() {\n//   const res = await fetch(`${BASE_URL}/claims`);\n//   if (!res.ok) throw new Error(\"Failed to fetch claims\");\n//   return res.json();\n// }\n\n// export async function getClaimById(id) {\n//   const res = await fetch(`${BASE_URL}/claims/${id}`);\n//   if (!res.ok) throw new Error(\"Claim not found\");\n//   return res.json();\n// }\n\n// export async function getClaimsByCustomerId(customerId) {\n//   const res = await fetch(`${BASE_URL}/claims/customer/${customerId}`);\n//   if (!res.ok) throw new Error(\"Failed to fetch customer claims\");\n//   return res.json();\n// }\n\n// export async function getClaimsByUserId(userId) {\n//   const res = await fetch(`${BASE_URL}/claims/user/${userId}`);\n//   if (!res.ok) throw new Error(\"Failed to fetch user claims\");\n//   return res.json();\n// }\n\n// export async function updateClaimStatus(id, status) {\n//   const res = await fetch(`${BASE_URL}/claims/${id}/status`, {\n//     method: \"PUT\",\n//     headers: { \"Content-Type\": \"application/json\" },\n//     body: JSON.stringify({ status }),\n//   });\n//   if (!res.ok) throw new Error(\"Failed to update claim status\");\n//   return res.json();\n// }\n\n// export async function approveClaim(id) {\n//   const res = await fetch(`${BASE_URL}/claims/${id}/approve`, { method: \"PUT\" });\n//   if (!res.ok) throw new Error(\"Failed to approve claim\");\n//   return res.json();\n// }\n\n// export async function rejectClaim(id) {\n//   const res = await fetch(`${BASE_URL}/claims/${id}/reject`, { method: \"PUT\" });\n//   if (!res.ok) throw new Error(\"Failed to reject claim\");\n//   return res.json();\n// }\n\n// // Fetch claims for logged-in customer or user\n// export async function getMyClaims() {\n//   const auth = getAuth();\n//   if (!auth) throw new Error(\"Not logged in\");\n\n//   if (auth.customerId) {\n//     return getClaimsByCustomerId(auth.customerId);\n//   } else if (auth.userId) {\n//     return getClaimsByUserId(auth.userId);\n//   } else {\n//     throw new Error(\"Customer/User ID not found\");\n//   }\n// }\n\n// export async function getClaimsByStatus(customerId, status) {\n//   const res = await fetch(`${BASE_URL}/claims/customer/${customerId}?status=${status}`);\n//   if (!res.ok) throw new Error(\"Failed to fetch filtered claims\");\n//   return res.json();\n// }\n\n// /* ================== CUSTOMERS ================== */\n// export async function createCustomer(payload) {\n//   const res = await fetch(`${BASE_URL}/customers`, {\n//     method: \"POST\",\n//     headers: { \"Content-Type\": \"application/json\" },\n//     body: JSON.stringify(payload),\n//   });\n//   if (!res.ok) throw new Error(\"Failed to create customer\");\n//   return res.json();\n// }\n\n// export async function getAllCustomers() {\n//   const res = await fetch(`${BASE_URL}/customers`);\n//   if (!res.ok) throw new Error(\"Failed to fetch customers\");\n//   return res.json();\n// }\n\n// export async function getCustomerById(id) {\n//   const res = await fetch(`${BASE_URL}/customers/${id}`);\n//   if (!res.ok) throw new Error(\"Customer not found\");\n//   return res.json();\n// }\n\n// export async function deleteCustomer(id) {\n//   const res = await fetch(`${BASE_URL}/customers/${id}`, { method: \"DELETE\" });\n//   if (!res.ok) throw new Error(\"Failed to delete customer\");\n//   return true;\n// }\n\n// /* ================== USERS ================== */\n// export async function createUser(payload) {\n//   const res = await fetch(`${BASE_URL}/users`, {\n//     method: \"POST\",\n//     headers: { \"Content-Type\": \"application/json\" },\n//     body: JSON.stringify(payload),\n//   });\n//   if (!res.ok) throw new Error(\"Failed to create user\");\n//   return res.json();\n// }\n\n// export async function getAllUsers() {\n//   const res = await fetch(`${BASE_URL}/users`);\n//   if (!res.ok) throw new Error(\"Failed to fetch users\");\n//   return res.json();\n// }\n\n// export async function getUserById(id) {\n//   const res = await fetch(`${BASE_URL}/users/${id}`);\n//   if (!res.ok) throw new Error(\"User not found\");\n//   return res.json();\n// }\n\n// export async function deleteUser(id) {\n//   const res = await fetch(`${BASE_URL}/users/${id}`, { method: \"DELETE\" });\n//   if (!res.ok) throw new Error(\"Failed to delete user\");\n//   return true;\n// }\n// src/utils/api.js\nconst BASE_URL = \"http://localhost:8080/api\";\n\n/* ================== AUTH ================== */\nexport async function login(email, password) {\n  const res = await fetch(`${BASE_URL}/auth/login`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      email,\n      password\n    })\n  });\n  if (!res.ok) {\n    const body = await res.json().catch(() => ({}));\n    throw new Error(body.message || body.error || \"Invalid login credentials\");\n  }\n  return res.json(); // { message, userId, email, role, customerId? }\n}\nexport function saveAuth(data) {\n  localStorage.setItem(\"auth\", JSON.stringify(data));\n}\nexport function getAuth() {\n  const auth = localStorage.getItem(\"auth\");\n  return auth ? JSON.parse(auth) : null;\n}\n\n/* ================== CLAIMS ================== */\n// Fetch claims for logged-in customer\nexport async function getMyClaims() {\n  const auth = getAuth();\n  if (!auth) throw new Error(\"Not logged in\");\n  if (auth.customerId) {\n    const res = await fetch(`${BASE_URL}/claims/customer/${auth.customerId}`);\n    if (!res.ok) throw new Error(\"Failed to fetch claims\");\n    return res.json();\n  } else {\n    throw new Error(\"Customer ID not found. Please log in again.\");\n  }\n}","map":{"version":3,"names":["BASE_URL","login","email","password","res","fetch","method","headers","body","JSON","stringify","ok","json","catch","Error","message","error","saveAuth","data","localStorage","setItem","getAuth","auth","getItem","parse","getMyClaims","customerId"],"sources":["C:/Users/hemal/Downloads/Insurance - Copy/Insurance/reactapp/src/utils/api.js"],"sourcesContent":["// const BASE_URL = \"http://localhost:8080/api\";\n\n// /* ================== AUTH ================== */\n// export async function login(email, password) {\n//   const res = await fetch(`${BASE_URL}/auth/login`, {\n//     method: \"POST\",\n//     headers: { \"Content-Type\": \"application/json\" },\n//     body: JSON.stringify({ email, password }),\n//   });\n\n//   if (!res.ok) {\n//     const body = await res.json().catch(() => ({}));\n//     throw new Error(body.message || body.error || \"Invalid login credentials\");\n//   }\n\n//   const data = await res.json();\n\n//   // Save auth to localStorage\n//   saveAuth({\n//     userId: data.userId,\n//     customerId: data.customerId || null,\n//     role: data.role,\n//     email: data.email,\n//   });\n\n//   return data;\n// }\n\n// export async function registerUser(username, email, password, role) {\n//   const res = await fetch(`${BASE_URL}/auth/register`, {\n//     method: \"POST\",\n//     headers: { \"Content-Type\": \"application/json\" },\n//     body: JSON.stringify({\n//       username,\n//       email,\n//       password,\n//       role: role ? role.toUpperCase() : \"CUSTOMER\",\n//     }),\n//   });\n\n//   const data = await res.json();\n//   if (!res.ok) throw new Error(data.message || \"Registration failed\");\n\n//   // Save auth to localStorage\n//   saveAuth({\n//     userId: data.userId,\n//     customerId: data.customerId || null,\n//     role: data.role,\n//     email: data.email,\n//   });\n\n//   return data;\n// }\n\n// /* ================== AUTH HELPERS ================== */\n// export function saveAuth(data) {\n//   localStorage.setItem(\"auth\", JSON.stringify(data));\n// }\n\n// export function getAuth() {\n//   const auth = localStorage.getItem(\"auth\");\n//   return auth ? JSON.parse(auth) : null;\n// }\n\n// export function clearAuth() {\n//   localStorage.removeItem(\"auth\");\n// }\n\n// /* ================== CLAIMS ================== */\n// export async function createClaim(payload) {\n//   const res = await fetch(`${BASE_URL}/claims`, {\n//     method: \"POST\",\n//     headers: { \"Content-Type\": \"application/json\" },\n//     body: JSON.stringify(payload),\n//   });\n//   if (!res.ok) throw new Error(\"Failed to submit claim\");\n//   return res.json();\n// }\n\n// export async function getAllClaims() {\n//   const res = await fetch(`${BASE_URL}/claims`);\n//   if (!res.ok) throw new Error(\"Failed to fetch claims\");\n//   return res.json();\n// }\n\n// export async function getClaimById(id) {\n//   const res = await fetch(`${BASE_URL}/claims/${id}`);\n//   if (!res.ok) throw new Error(\"Claim not found\");\n//   return res.json();\n// }\n\n// export async function getClaimsByCustomerId(customerId) {\n//   const res = await fetch(`${BASE_URL}/claims/customer/${customerId}`);\n//   if (!res.ok) throw new Error(\"Failed to fetch customer claims\");\n//   return res.json();\n// }\n\n// export async function getClaimsByUserId(userId) {\n//   const res = await fetch(`${BASE_URL}/claims/user/${userId}`);\n//   if (!res.ok) throw new Error(\"Failed to fetch user claims\");\n//   return res.json();\n// }\n\n// export async function updateClaimStatus(id, status) {\n//   const res = await fetch(`${BASE_URL}/claims/${id}/status`, {\n//     method: \"PUT\",\n//     headers: { \"Content-Type\": \"application/json\" },\n//     body: JSON.stringify({ status }),\n//   });\n//   if (!res.ok) throw new Error(\"Failed to update claim status\");\n//   return res.json();\n// }\n\n// export async function approveClaim(id) {\n//   const res = await fetch(`${BASE_URL}/claims/${id}/approve`, { method: \"PUT\" });\n//   if (!res.ok) throw new Error(\"Failed to approve claim\");\n//   return res.json();\n// }\n\n// export async function rejectClaim(id) {\n//   const res = await fetch(`${BASE_URL}/claims/${id}/reject`, { method: \"PUT\" });\n//   if (!res.ok) throw new Error(\"Failed to reject claim\");\n//   return res.json();\n// }\n\n// // Fetch claims for logged-in customer or user\n// export async function getMyClaims() {\n//   const auth = getAuth();\n//   if (!auth) throw new Error(\"Not logged in\");\n\n//   if (auth.customerId) {\n//     return getClaimsByCustomerId(auth.customerId);\n//   } else if (auth.userId) {\n//     return getClaimsByUserId(auth.userId);\n//   } else {\n//     throw new Error(\"Customer/User ID not found\");\n//   }\n// }\n\n// export async function getClaimsByStatus(customerId, status) {\n//   const res = await fetch(`${BASE_URL}/claims/customer/${customerId}?status=${status}`);\n//   if (!res.ok) throw new Error(\"Failed to fetch filtered claims\");\n//   return res.json();\n// }\n\n// /* ================== CUSTOMERS ================== */\n// export async function createCustomer(payload) {\n//   const res = await fetch(`${BASE_URL}/customers`, {\n//     method: \"POST\",\n//     headers: { \"Content-Type\": \"application/json\" },\n//     body: JSON.stringify(payload),\n//   });\n//   if (!res.ok) throw new Error(\"Failed to create customer\");\n//   return res.json();\n// }\n\n// export async function getAllCustomers() {\n//   const res = await fetch(`${BASE_URL}/customers`);\n//   if (!res.ok) throw new Error(\"Failed to fetch customers\");\n//   return res.json();\n// }\n\n// export async function getCustomerById(id) {\n//   const res = await fetch(`${BASE_URL}/customers/${id}`);\n//   if (!res.ok) throw new Error(\"Customer not found\");\n//   return res.json();\n// }\n\n// export async function deleteCustomer(id) {\n//   const res = await fetch(`${BASE_URL}/customers/${id}`, { method: \"DELETE\" });\n//   if (!res.ok) throw new Error(\"Failed to delete customer\");\n//   return true;\n// }\n\n// /* ================== USERS ================== */\n// export async function createUser(payload) {\n//   const res = await fetch(`${BASE_URL}/users`, {\n//     method: \"POST\",\n//     headers: { \"Content-Type\": \"application/json\" },\n//     body: JSON.stringify(payload),\n//   });\n//   if (!res.ok) throw new Error(\"Failed to create user\");\n//   return res.json();\n// }\n\n// export async function getAllUsers() {\n//   const res = await fetch(`${BASE_URL}/users`);\n//   if (!res.ok) throw new Error(\"Failed to fetch users\");\n//   return res.json();\n// }\n\n// export async function getUserById(id) {\n//   const res = await fetch(`${BASE_URL}/users/${id}`);\n//   if (!res.ok) throw new Error(\"User not found\");\n//   return res.json();\n// }\n\n// export async function deleteUser(id) {\n//   const res = await fetch(`${BASE_URL}/users/${id}`, { method: \"DELETE\" });\n//   if (!res.ok) throw new Error(\"Failed to delete user\");\n//   return true;\n// }\n// src/utils/api.js\nconst BASE_URL = \"http://localhost:8080/api\";\n\n/* ================== AUTH ================== */\nexport async function login(email, password) {\n  const res = await fetch(`${BASE_URL}/auth/login`, {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify({ email, password }),\n  });\n\n  if (!res.ok) {\n    const body = await res.json().catch(() => ({}));\n    throw new Error(body.message || body.error || \"Invalid login credentials\");\n  }\n\n  return res.json(); // { message, userId, email, role, customerId? }\n}\n\nexport function saveAuth(data) {\n  localStorage.setItem(\"auth\", JSON.stringify(data));\n}\n\nexport function getAuth() {\n  const auth = localStorage.getItem(\"auth\");\n  return auth ? JSON.parse(auth) : null;\n}\n\n/* ================== CLAIMS ================== */\n// Fetch claims for logged-in customer\nexport async function getMyClaims() {\n  const auth = getAuth();\n  if (!auth) throw new Error(\"Not logged in\");\n\n  if (auth.customerId) {\n    const res = await fetch(`${BASE_URL}/claims/customer/${auth.customerId}`);\n    if (!res.ok) throw new Error(\"Failed to fetch claims\");\n    return res.json();\n  } else {\n    throw new Error(\"Customer ID not found. Please log in again.\");\n  }\n}\n"],"mappings":"AAAA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAMA,QAAQ,GAAG,2BAA2B;;AAE5C;AACA,OAAO,eAAeC,KAAKA,CAACC,KAAK,EAAEC,QAAQ,EAAE;EAC3C,MAAMC,GAAG,GAAG,MAAMC,KAAK,CAAC,GAAGL,QAAQ,aAAa,EAAE;IAChDM,MAAM,EAAE,MAAM;IACdC,OAAO,EAAE;MAAE,cAAc,EAAE;IAAmB,CAAC;IAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;MAAER,KAAK;MAAEC;IAAS,CAAC;EAC1C,CAAC,CAAC;EAEF,IAAI,CAACC,GAAG,CAACO,EAAE,EAAE;IACX,MAAMH,IAAI,GAAG,MAAMJ,GAAG,CAACQ,IAAI,CAAC,CAAC,CAACC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;IAC/C,MAAM,IAAIC,KAAK,CAACN,IAAI,CAACO,OAAO,IAAIP,IAAI,CAACQ,KAAK,IAAI,2BAA2B,CAAC;EAC5E;EAEA,OAAOZ,GAAG,CAACQ,IAAI,CAAC,CAAC,CAAC,CAAC;AACrB;AAEA,OAAO,SAASK,QAAQA,CAACC,IAAI,EAAE;EAC7BC,YAAY,CAACC,OAAO,CAAC,MAAM,EAAEX,IAAI,CAACC,SAAS,CAACQ,IAAI,CAAC,CAAC;AACpD;AAEA,OAAO,SAASG,OAAOA,CAAA,EAAG;EACxB,MAAMC,IAAI,GAAGH,YAAY,CAACI,OAAO,CAAC,MAAM,CAAC;EACzC,OAAOD,IAAI,GAAGb,IAAI,CAACe,KAAK,CAACF,IAAI,CAAC,GAAG,IAAI;AACvC;;AAEA;AACA;AACA,OAAO,eAAeG,WAAWA,CAAA,EAAG;EAClC,MAAMH,IAAI,GAAGD,OAAO,CAAC,CAAC;EACtB,IAAI,CAACC,IAAI,EAAE,MAAM,IAAIR,KAAK,CAAC,eAAe,CAAC;EAE3C,IAAIQ,IAAI,CAACI,UAAU,EAAE;IACnB,MAAMtB,GAAG,GAAG,MAAMC,KAAK,CAAC,GAAGL,QAAQ,oBAAoBsB,IAAI,CAACI,UAAU,EAAE,CAAC;IACzE,IAAI,CAACtB,GAAG,CAACO,EAAE,EAAE,MAAM,IAAIG,KAAK,CAAC,wBAAwB,CAAC;IACtD,OAAOV,GAAG,CAACQ,IAAI,CAAC,CAAC;EACnB,CAAC,MAAM;IACL,MAAM,IAAIE,KAAK,CAAC,6CAA6C,CAAC;EAChE;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}